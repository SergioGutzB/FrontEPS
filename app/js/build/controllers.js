function pacienteAddController(e,t,n,o,i,a){var l=this;l.sData=n,t.pageTitle="Registrar Paciente",t.pageIcon="fa-user-plus";var r=function(e){e&&(e.$setPristine(),e.$setUntouched()),l.patient={type:"patient",email:"",password:"",password_confirmation:"",document:"",name:"",last_name:"",gender:"",birthdate:"",phone:"",aditional_information:{blood_type:"",civil_status:"",occupation:"",live_with:"",religion:"",companion:"",place_of_birth:"",state:"",municipality:"",city:"",address:"",cellphone:"",ethnicity:"",education_level:"",municipality:"",state:""}}};r(),null!==l.sData.patient&&(console.log(l.sData.patient.id),o.getUser(l.sData.patient.id).then(function(e){console.log(e.data),l.patient=e.data},function(e){l.patient=l.sData.patient}),l.title="Editar Paciente",l.icon="fa-user");var s=function(){i.show(i.simple().textContent("Paciente registrado!").position("top right").hideDelay(3e3))},c=function(e){a.show(a.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Error de registro").textContent("No ha sido posible registrar el paciente, intente nuevamente.").ariaLabel("Error registro de paciente").ok("Volver").targetEvent(e))};l.save=function(e){var t={type:l.patient.type,email:l.patient.email,password:l.patient.document,password_confirmation:l.patient.document,document:l.patient.document,name:l.patient.name,last_name:l.patient.last_name,gender:l.patient.gender,birthdate:l.patient.birthdate,phone:l.patient.phone,blood_type:l.patient.additional_information_user.blood_type,civil_status:l.patient.additional_information_user.civil_status,occupation:l.patient.additional_information_user.occupation,live_with:l.patient.additional_information_user.live_with,religion:l.patient.additional_information_user.religion,companion:l.patient.additional_information_user.companion,place_of_birth:l.patient.additional_information_user.place_of_birth,state:l.patient.additional_information_user.state,municipality:l.patient.additional_information_user.municipality,city:l.patient.additional_information_user.city,address:l.patient.additional_information_user.address,cellphone:l.patient.additional_information_user.cellphone,ethnicity:l.patient.additional_information_user.ethnicity,education_level:l.patient.additional_information_user.education_level,municipality:l.patient.additional_information_user.municipality,state:l.patient.additional_information_user.state};if(l.patient.attendants){({document:l.patient.attendants.document,name:l.patient.attendants.name,last_name:l.patient.attendants.last_name,address:l.patient.attendants.address,relationship:l.patient.attendants.relationship,phone:l.patient.attendants.phone,user:l.patientdocument})}o.addPatient(t).then(function(t){"ok"==t.data.status&&(s(),r(e))},function(e){c($event)})}}function profesionalAddController(e,t,n,o,i,a,l){var r=this;r.sData=n,t.pageTitle="Registrar Profesional",t.pageIcon="fa-user-md",r.dias=["Lunes","Martes","Miercoles","Jueves","Viernes","Sábado"],r.searchTerm,r.clearSearchTerm=function(){r.searchTerm=""};var s=function(){i.show(i.simple().textContent("Profesional registrado!").position("top right").hideDelay(6e3))},c=function(e){a.show(a.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Error de registro").textContent("No ha sido posible registrar el Profesional, intente nuevamente.").ariaLabel("Error registro de Profesional").ok("Volver").targetEvent(e))},d=function(e){e&&(e.$setPristine(),e.$setUntouched()),r.profesional={}};d(),null!==r.sData.profesional&&(r.profesional=r.sData.profesional,r.profesional.fechaNacimiento=new Date(Date.parse(r.profesional.fechaNacimiento)),r.profesional.consultorio=parseInt(r.profesional.consultorio),r.title="Editar Profesional",r.icon="fa-user"),r.save=function(e){var t={birthdate:r.profesional.birthdate,gender:r.profesional.gender,last_name:r.profesional.last_name,name:r.profesional.name,phone:r.profesional.phone,email:r.profesional.email,password:r.profesional.document,password_confirmation:r.profesional.document,document:r.profesional.document,type:"doctor",speciality:r.profesional.speciality,medical_license:r.profesional.medical_license,schedule:r.profesional.startsAt+" - "+r.profesional.endsAt,worked_days:r.profesional.worked_days};o.addProfesional(t).then(function(t){console.log(t),s(),d(e),l.path("/profesionales")},function(e){console.log(e),c($event)})}}function adminController(e,t,n,o,i){var a=this;a.sData=n,t.currenPage="admin",t.pageTitle="Añadir Especialidad",t.pageIcon="fa-cog",a.addEspecialidad=function(){a.especialidad&&i.addEspecialidad({name:a.especialidad}).then(function(e){console.log(e)})}}function CitasController(e,t,n,o,i,a,l,r,s,c,d){var p=this;p.sData=c,p.cita={},o.currentPage="citas_medicas",o.pageTitle="Citas Médicas",o.pageIcon="fa-calendar";var u=function(){d.getCites().then(function(e){console.log("citas..."),console.log(e),console.log(p.patient.id),p.cites=e.data.cites.filter(function(e){return e.patient.id===p.patient.id}),console.log(p.cites),p.cites=p.cites.map(function(e){return $.extend(e,{title:"valoracion",color:a.colorTypes.warning,startsAt:n(e.date_cite),endsAt:n(e.date_cite)})}),console.log(p.cites)},function(e){console.log(e),p.cites={}})};null!==p.sData.patient&&(p.patient=p.sData.patient,u()),l.$watch(function(){return p.cita.speciality},function(){d.getProfesionales().then(function(e){p.profesionals=e.data.doctors.filter(function(e){return e.speciality===p.cita.speciality})})}),p.openToast=function(t){e.show(e.simple().textContent("Hello!"))},p.calendarView="week",p.viewDate=new Date,p.rangeSelected=function(e,t){p.firstDateClicked=e,p.lastDateClicked=t},a.dateFormatter="moment";var f=angular.copy(a.i18nStrings);a.i18nStrings.weekNumber="Semana {week}",r.moment=r.moment||n,s.load("../../../bower_components/moment/locale/es.js").then(function(){n.locale("es",{week:{dow:1}}),n.locale("es")}),l.$on("$destroy",function(){n.locale("en"),a.i18nStrings=f});p.cellIsOpen=!0,p.add=function(){console.log(p.cita),d.addCite(p.cita).then(function(e){u(),p.openToast("Cita médica guardada con éxito"),p.cita={}},function(e){})},l.$watch(function(){return p.cita.startsAt},function(){p.cita.endsAt=p.cita.startsAt}),p.eventClicked=function(e){i.show("Clicked",e)},p.eventEdited=function(e){i.show("Edited",e)},p.eventDeleted=function(e){console.log("Deleted"),i.show("Deleted ju",e)},p.eventTimesChanged=function(e){i.show("Dropped or resized",e)},p.toggle=function(e,t,n){e.preventDefault(),e.stopPropagation(),n[t]=!n[t]},p.timespanClicked=function(e,t){"month"===p.calendarView?p.cellIsOpen&&n(e).startOf("day").isSame(n(p.viewDate).startOf("day"))||0===t.events.length||!t.inMonth?p.cellIsOpen=!1:(p.cellIsOpen=!0,p.viewDate=e):"year"===p.calendarView&&(p.cellIsOpen&&n(e).startOf("month").isSame(n(p.viewDate).startOf("month"))||0===t.events.length?p.cellIsOpen=!1:(p.cellIsOpen=!0,p.viewDate=e))}}function DashBoardController(e,t,n){e.currentPage="inicio",e.pageTitle="Inicio",e.pageIcon="fa-home"}function hcController(e,t,n,o,i){var a=this;a.sData=n,t.pageTitle="Historia Clínica",t.pageIcon="fa-address-card";var l={user_id:2,valuation_format:{motivoConsulta:"esta loco",farmacologicos:"todos",efermedadesFamiliares:"todas",EnfermedadesPersonales:"mas",EnfermedadesPsiquiatricas:"ninguna",Medicamentos:"ninguna",DatosSocioDemograficos:"DatosSocio Demograficos",HallasgosImportantes:"Hallasgos Importantes",EvolucionPsicologia:"Evolucion Psicología",ImpresionDiagnostica:"Impresión Diagnostica",ConductaSeguir:"ConductaSeguir",Pruebas:"Pruebas",Diagnostico:"Diagnostico"},evolution_format:{Objetivo:"Objetivos",DesarrolloSesion:"Desarrollo Sesión",EvolucionPaciente:"Evolución Paciente",ConductaSeguir:"Conducta Seguir",DiagnosticoPrincipal:"Diagnostico Principal"},format_not_pos:{procedimientos:"procedimientos...."}};i.addHc(l).then(function(e){console.log(e)},function(e){console.log(e)}),null===a.sData.paciente&&o.path("/pacientes"),a.paciente=a.sData.paciente}function indexController(e,t,n){var o=this;o.close=function(){console.log("close")},e.pageTitle="Inicio",e.pageIcon="fa-home",e.currentPage=t.path().split("/")[1],o.go=function(n){e.currentPage=n,t.path("/"+n),""===n&&(e.currentPage="inicio")}}function loginController(e,t,n,o,i,a){var l=this;l.admin={email:"admin2@gmail.com",password:"1234567",password_confirmation:"1234567",document:"1234567",type:"admin",name:"Administrador",last_name:"Administrador",nickname:"1234567"},n.validateUser().then(function(){console.log("redirecionando.."),t.path("/")}).catch(function(e){console.log("no validate user..")}),l.submitLogin=function(){n.submitLogin(l.loginForm).then(function(n){console.log("logeado");var i=n.id;a.getUser(i).then(function(n){var i=n.data;e.user=i,e.sesion=i.type,null==i.type&&(t.path("/citas_medicas"),o.ROL_CURRENT_USER=3),"Functionary"==i.type&&(t.path("/citas_medicas"),o.ROL_CURRENT_USER=4),"Patient"==i.type&&(t.path("/citas_medicas"),o.ROL_CURRENT_USER=2),"Admin"==i.type&&(t.path("/"),o.ROL_CURRENT_USER=1)}).catch(function(e){})}).catch(function(e){console.log("No logeado")})},e.pageTitle="Login",e.pageIcon="",e.currentPage=t.path().split("/")[1]}function pacientesController(e,t,n,o,i,a,l,r){function s(e,t){var n=this;n.sData=t,n.hide=function(){e.hide()},n.cancel=function(){e.cancel()},n.answer=function(t){e.hide(t)}}var c=this;c.sData=l,t.pageTitle="Pacientes",t.pageIcon="fa-users",c.showAdvanced=function(e){c.getCurrentSelection()&&a.show({controller:s,controllerAs:"dialog",bindToController:!0,templateUrl:"/views/modalPaciente.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:c.customFullscreen}).then(function(e){c.status='You said the information was "'+e+'".'},function(){c.status="You cancelled the dialog."})},c.seleccionable=!0,c.gridOptions={enableRowSelection:!1,enableRowHeaderSelection:!1,paginationPageSizes:[25,50,75],paginationPageSize:25,enablePaginationControls:!1,enableFiltering:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,noUnselect:!0,onRegisterApi:function(e){c.gridApi=e,c.gridApi.grid.registerRowsProcessor(c.singleFilter,200)},columnDefs:[{field:"id"},{field:"name"},{field:"last_name"},{field:"document"},{field:"birthdate"},{field:"phone"}]},c.toggleRowSelection=function(){c.sData.patient=null,c.gridApi.selection.clearSelectedRows(),c.gridOptions.enableRowSelection=!c.gridOptions.enableRowSelection,c.gridApi.core.notifyDataChange(o.dataChange.OPTIONS)},c.getCurrentSelection=function(){return c.sData.patient=c.gridApi.selection.getSelectedRows()[0],console.log("selecionado"),console.log(c.sData.patient),void 0!==c.sData.patient},c.filter=function(){c.gridApi.grid.refresh()},c.singleFilter=function(e){var t=new RegExp(c.filterValue);return e.forEach(function(e){var n=!1;["document","name","last_name"].forEach(function(o){e.entity[o].match(t)&&(n=!0)}),n||(e.visible=!1)}),e},e.$watch(function(){return c.filterValue},c.filter),e.$watch(function(){return c.seleccionable},c.toggleRowSelection),c.go=function(e){c.getCurrentSelection()&&i.path("/"+e)},c.goAdd=function(e){c.sData.patient=null,i.path("/addPaciente")},r.getUser(2).then(function(e){console.log("usuario id:"),console.log(e)}),r.getUsers().then(function(e){c.gridOptions.data=e.data.users.filter(function(e){return"Patient"===e.type}),console.log(c.gridOptions.data)}),n(function(){c.gridApi.selection.selectRow(c.gridOptions.data[0]),c.gridApi.selection.clearSelectedRows()},0,1),s.$inject=["$mdDialog","sData"]}function profesionalesController(e,t,n,o,i,a,l,r){var s=this;s.sData=l,s.seleccionable=!0,s.filterValue="",t.pageTitle="Pacientes",t.pageIcon="fa-user-md",s.gridOptions={enableRowSelection:!1,enableRowHeaderSelection:!1,paginationPageSizes:[25,50,75],paginationPageSize:25,enablePaginationControls:!1,enableFiltering:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,noUnselect:!0,onRegisterApi:function(e){s.gridApi=e,s.gridApi.grid.registerRowsProcessor(s.singleFilter,200)},columnDefs:[{field:"name"},{field:"last_name"},{field:"document"},{field:"birthdate"},{field:"speciality"},{field:"consultorio"}]},s.toggleRowSelection=function(){s.sData.profesional=null,s.gridApi.selection.clearSelectedRows(),s.gridOptions.enableRowSelection=!s.gridOptions.enableRowSelection,s.gridApi.core.notifyDataChange(o.dataChange.OPTIONS)},s.getCurrentSelection=function(){return s.sData.profesional=s.gridApi.selection.getSelectedRows()[0],void 0!==s.sData.profesional},s.filter=function(){s.filterValue&&s.gridApi.grid.refresh()},s.singleFilter=function(e){var t=new RegExp(s.filterValue);return e.forEach(function(e){var n=!1;["name","last_name","document","speciality"].forEach(function(o){e.entity[o].match(t)&&(n=!0)}),n||(e.visible=!1)}),e},e.$watch(function(){return s.filterValue},s.filter),e.$watch(function(){return s.seleccionable},s.toggleRowSelection),s.go=function(e){s.getCurrentSelection()&&i.path("/"+e)},s.goAdd=function(e){s.sData.profesional=null,i.path("/addProfesional")},r.getProfesionales().then(function(e){console.log(e)},function(e){console.log("error.."),console.log(e)}),r.getProfesional(1).then(function(e){console.log(e)},function(e){console.log(e)}),s.gridOptions.data=s.sData.profesionales,n(function(){s.gridApi.selection.selectRow(s.gridOptions.data[0]),s.gridApi.selection.clearSelectedRows()},0,1)}var eps=angular.module("Eps");eps.controller("PacienteAdd",pacienteAddController),pacienteAddController.$inject=["$scope","$rootScope","sData","eps","$mdToast","$mdDialog"];var eps=angular.module("Eps");eps.controller("ProfesionalAdd",profesionalAddController),profesionalAddController.$inject=["$scope","$rootScope","sData","eps","$mdToast","$mdDialog","$location"];var eps=angular.module("Eps");eps.controller("Admin",adminController),adminController.$inject=["$scope","$rootScope","sData","$location","eps"];var eps=angular.module("Eps");eps.controller("Citas",CitasController),CitasController.$inject=["$mdToast","$auth","moment","$rootScope","alert","calendarConfig","$scope","$window","$ocLazyLoad","sData","eps"];var eps=angular.module("Eps");eps.controller("DashBoard",DashBoardController),DashBoardController.$inject=["$rootScope","$location","$auth"];var eps=angular.module("Eps");eps.controller("HC",hcController),hcController.$inject=["$scope","$rootScope","sData","$location","eps"];var eps=angular.module("Eps");eps.controller("Index",indexController),indexController.$inject=["$rootScope","$location","$auth"];var eps=angular.module("Eps");eps.controller("Login",loginController),loginController.$inject=["$rootScope","$location","$auth","CONFIG","ROLES","eps"];var eps=angular.module("Eps");eps.controller("Pacientes",pacientesController),pacientesController.$inject=["$scope","$rootScope","$interval","uiGridConstants","$location","$mdDialog","sData","eps"];var eps=angular.module("Eps");eps.controller("Profesionales",profesionalesController),profesionalesController.$inject=["$scope","$rootScope","$interval","uiGridConstants","$location","$mdDialog","sData","eps"];