function pacienteAddController(e,t,o){var n=this;n.sData=o,t.pageTitle="Registrar Paciente",t.pageIcon="fa-user-plus",null!==n.sData.paciente&&(n.paciente=n.sData.paciente,n.paciente.fechaNacimiento=new Date(Date.parse(n.paciente.fechaNacimiento)),n.title="Editar Paciente",n.icon="fa-user")}function profesionalAddController(e,t,o){var n=this;n.sData=o,t.pageTitle="Registrar Profesional",t.pageIcon="fa-user-md",null!==n.sData.profesional&&(n.profesional=n.sData.profesional,n.profesional.fechaNacimiento=new Date(Date.parse(n.profesional.fechaNacimiento)),n.profesional.consultorio=parseInt(n.profesional.consultorio),n.title="Editar Profesional",n.icon="fa-user")}function adminController(e,t,o,n,a){var i=this;i.sData=o,t.currenPage="admin",t.pageTitle="Añadir Especialidad",t.pageIcon="fa-cog",i.addEspecialidad=function(){i.especialidad&&a.addEspecialidad({name:i.especialidad}).then(function(e){console.log(e)})}}function CitasController(e,t,o,n,a,i,l,r,c,s){var d=this;d.sData=s,d.cita={},n.currentPage="citas_medicas",n.pageTitle="Citas Médicas",n.pageIcon="fa-calendar",d.openToast=function(t){e.show(e.simple().textContent("Hello!"))},d.calendarView="week",d.viewDate=new Date,d.rangeSelected=function(e,t){d.firstDateClicked=e,d.lastDateClicked=t},i.dateFormatter="moment";var p=angular.copy(i.i18nStrings);i.i18nStrings.weekNumber="Semana {week}",r.moment=r.moment||o,c.load("../../../bower_components/moment/locale/es.js").then(function(){o.locale("es",{week:{dow:1}}),o.locale("es")}),l.$on("$destroy",function(){o.locale("en"),i.i18nStrings=p});var u=[{label:"<i class='glyphicon glyphicon-pencil'></i>",onClick:function(e){a.show("Edited",e.calendarEvent)}},{label:"<i class='glyphicon glyphicon-remove'></i>",onClick:function(e){a.show("Deleted",e.calendarEvent)}}];d.events=[{title:"Paciente 1",color:i.colorTypes.warning,startsAt:o().startOf("day").add(7,"hours").toDate(),endsAt:o().startOf("day").add(7.5,"hours").toDate(),draggable:!0,resizable:!0,actions:u},{title:"Paciente 2",color:i.colorTypes.info,startsAt:o().startOf("day").add(7.5,"hours").toDate(),endsAt:o().startOf("day").add(8,"hours").toDate(),draggable:!0,resizable:!0,actions:u},{title:"Paciente 3",color:i.colorTypes.important,startsAt:o().startOf("day").add(8,"hours").toDate(),endsAt:o().startOf("day").add(9,"hours").toDate(),recursOn:"year",draggable:!0,resizable:!0,actions:u}],d.cellIsOpen=!0,d.add=function(){console.log(d.cita),d.events.push({title:d.sData.paciente.primerNombre+" "+d.sData.paciente.primerApellido,startsAt:d.cita.startsAt,endsAt:d.cita.endsAt,color:i.colorTypes.important,draggable:!0}),d.openToast("Cita médica guardada con éxito"),d.cita={}},l.$watch(function(){return d.cita.startsAt},function(){d.cita.endsAt=d.cita.startsAt}),d.eventClicked=function(e){a.show("Clicked",e)},d.eventEdited=function(e){a.show("Edited",e)},d.eventDeleted=function(e){console.log("Deleted"),a.show("Deleted ju",e)},d.eventTimesChanged=function(e){a.show("Dropped or resized",e)},d.toggle=function(e,t,o){e.preventDefault(),e.stopPropagation(),o[t]=!o[t]},d.timespanClicked=function(e,t){"month"===d.calendarView?d.cellIsOpen&&o(e).startOf("day").isSame(o(d.viewDate).startOf("day"))||0===t.events.length||!t.inMonth?d.cellIsOpen=!1:(d.cellIsOpen=!0,d.viewDate=e):"year"===d.calendarView&&(d.cellIsOpen&&o(e).startOf("month").isSame(o(d.viewDate).startOf("month"))||0===t.events.length?d.cellIsOpen=!1:(d.cellIsOpen=!0,d.viewDate=e))}}function DashBoardController(e,t,o){e.currentPage="inicio",e.pageTitle="Inicio",e.pageIcon="fa-home"}function hcController(e,t,o,n){var a=this;a.sData=o,t.pageTitle="Historia Clínica",t.pageIcon="fa-address-card",null==a.sData.paciente&&n.path("/pacientes"),a.paciente=a.sData.paciente}function indexController(e,t,o){var n=this;n.close=function(){console.log("close")},e.pageTitle="Inicio",e.pageIcon="fa-home",e.currentPage=t.path().split("/")[1],n.go=function(o){e.currentPage=o,t.path("/"+o),""===o&&(e.currentPage="inicio")}}function loginController(e,t,o){var n=this;n.admin={email:"admin@gmail.com",password:"12345678",password_confirmation:"12345678",document:"321321",type:"admin"},o.validateUser().then(function(){console.log("redirecionando.."),t.path("/")}).catch(function(e){}),n.submitLogin=function(){o.submitLogin(n.loginForm).then(function(o){console.log("logeado"),console.log(o);var n=o;e.user=n,e.sesion=n.type,(n.type="admin")&&t.path("/"),(n.type="doctor")&&t.path("/citas_medicas"),(n.type="functionary")&&t.path("/citas_medicas")}).catch(function(e){console.log("No logeado")})},e.pageTitle="Login",e.pageIcon="",e.currentPage=t.path().split("/")[1]}function pacientesController(e,t,o,n,a,i,l,r){function c(e,t){var o=this;o.sData=t,o.hide=function(){e.hide()},o.cancel=function(){e.cancel()},o.answer=function(t){e.hide(t)}}var s=this;s.sData=l,t.pageTitle="Pacientes",t.pageIcon="fa-users",s.showAdvanced=function(e){s.getCurrentSelection()&&i.show({controller:c,controllerAs:"dialog",bindToController:!0,templateUrl:"/views/modalPaciente.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:s.customFullscreen}).then(function(e){s.status='You said the information was "'+e+'".'},function(){s.status="You cancelled the dialog."})},s.seleccionable=!0,s.gridOptions={enableRowSelection:!1,enableRowHeaderSelection:!1,paginationPageSizes:[25,50,75],paginationPageSize:25,enablePaginationControls:!1,enableFiltering:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,noUnselect:!0,onRegisterApi:function(e){s.gridApi=e,s.gridApi.grid.registerRowsProcessor(s.singleFilter,200)},columnDefs:[{field:"name"},{field:"last_name"},{field:"document"},{field:"birthdate"},{field:"phone"}]},s.toggleRowSelection=function(){s.sData.paciente=null,s.gridApi.selection.clearSelectedRows(),s.gridOptions.enableRowSelection=!s.gridOptions.enableRowSelection,s.gridApi.core.notifyDataChange(n.dataChange.OPTIONS)},s.getCurrentSelection=function(){return s.sData.paciente=s.gridApi.selection.getSelectedRows()[0],console.log(s.sData.paciente),void 0!=s.sData.paciente},s.filter=function(){s.gridApi.grid.refresh()},s.singleFilter=function(e){var t=new RegExp(s.filterValue);return e.forEach(function(e){var o=!1;["document"].forEach(function(n){console.log(e.entity[n]),e.entity[n].match(t)&&(o=!0)}),o||(e.visible=!1)}),e},e.$watch(function(){return s.filterValue},s.filter),e.$watch(function(){return s.seleccionable},s.toggleRowSelection),s.go=function(e){s.getCurrentSelection()&&a.path("/"+e)},s.goAdd=function(e){s.sData.paciente=null,a.path("/addPaciente")},r.getUser().then(function(e){s.gridOptions.data=e.data.users.filter(function(e){return"Patient"===e.type})}),o(function(){s.gridApi.selection.selectRow(s.gridOptions.data[0]),s.gridApi.selection.clearSelectedRows()},0,1),c.$inject=["$mdDialog","sData"]}function profesionalesController(e,t,o,n,a,i,l,r){var c=this;c.sData=l,c.seleccionable=!0,c.filterValue="",t.pageTitle="Pacientes",t.pageIcon="fa-user-md",c.gridOptions={enableRowSelection:!1,enableRowHeaderSelection:!1,paginationPageSizes:[25,50,75],paginationPageSize:25,enablePaginationControls:!1,enableFiltering:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,noUnselect:!0,onRegisterApi:function(e){c.gridApi=e,c.gridApi.grid.registerRowsProcessor(c.singleFilter,200)},columnDefs:[{field:"primerNombre"},{field:"primerApellido"},{field:"segundoApellido"},{field:"documento"},{field:"especialidad"},{field:"consultorio"}]},c.toggleRowSelection=function(){c.sData.profesional=null,c.gridApi.selection.clearSelectedRows(),c.gridOptions.enableRowSelection=!c.gridOptions.enableRowSelection,c.gridApi.core.notifyDataChange(n.dataChange.OPTIONS)},c.getCurrentSelection=function(){return c.sData.profesional=c.gridApi.selection.getSelectedRows()[0],void 0!=c.sData.profesional},c.filter=function(){c.filterValue&&c.gridApi.grid.refresh()},c.singleFilter=function(e){var t=new RegExp(c.filterValue);return e.forEach(function(e){var o=!1;["primerNombre","primerApellido","segundoApellido","documento","especialidad"].forEach(function(n){e.entity[n].match(t)&&(o=!0)}),o||(e.visible=!1)}),e},e.$watch(function(){return c.filterValue},c.filter),e.$watch(function(){return c.seleccionable},c.toggleRowSelection),c.go=function(e){c.getCurrentSelection()&&a.path("/"+e)},c.goAdd=function(e){c.sData.profesional=null,a.path("/addProfesional")},r.getProfesionales().then(function(e){console.log("proseionales.."),console.log(e.data)},function(e){console.log("error.."),console.log(e)}),c.gridOptions.data=c.sData.profesionales,o(function(){c.gridApi.selection.selectRow(c.gridOptions.data[0]),c.gridApi.selection.clearSelectedRows()},0,1)}var eps=angular.module("Eps");eps.controller("PacienteAdd",pacienteAddController),pacienteAddController.$inject=["$scope","$rootScope","sData"];var eps=angular.module("Eps");eps.controller("ProfesionalAdd",profesionalAddController),profesionalAddController.$inject=["$scope","$rootScope","sData"];var eps=angular.module("Eps");eps.controller("Admin",adminController),adminController.$inject=["$scope","$rootScope","sData","$location","eps"];var eps=angular.module("Eps");eps.controller("Citas",CitasController),CitasController.$inject=["$mdToast","$auth","moment","$rootScope","alert","calendarConfig","$scope","$window","$ocLazyLoad","sData"];var eps=angular.module("Eps");eps.controller("DashBoard",DashBoardController),DashBoardController.$inject=["$rootScope","$location","$auth"];var eps=angular.module("Eps");eps.controller("HC",hcController),hcController.$inject=["$scope","$rootScope","sData","$location"];var eps=angular.module("Eps");eps.controller("Index",indexController),indexController.$inject=["$rootScope","$location","$auth"];var eps=angular.module("Eps");eps.controller("Login",loginController),loginController.$inject=["$rootScope","$location","$auth"];var eps=angular.module("Eps");eps.controller("Pacientes",pacientesController),pacientesController.$inject=["$scope","$rootScope","$interval","uiGridConstants","$location","$mdDialog","sData","eps"];var eps=angular.module("Eps");eps.controller("Profesionales",profesionalesController),profesionalesController.$inject=["$scope","$rootScope","$interval","uiGridConstants","$location","$mdDialog","sData","eps"];